{"version":3,"sources":["../../src/utils/index.js"],"names":["getProjectRoot","root","vscode","workspace","workspaceFolders","uri","fsPath","sendErrorMessage","msg","window","showErrorMessage","sendMessage","showInformationMessage","openSelect","chooseList","length","showQuickPick","readJSONFile","path","Promise","resolve","reject","FSExtra","readFile","err","data","Error","dataStr","toString","JSON","parse","error","writeFileReal","contents","cb","dirList","split","Path","sep","pop","dirPath","join","then","writeFile","catch"],"mappings":";;;;;;;;;;;;AACA;;AACA;;AACA;;AACA;;;;AAJA;AAMO,SAASA,cAAT,GAA0B;AAC/B,QAAMC,IAAI,GAAGC,gBAAOC,SAAP,CAAiBC,gBAAjB,CAAkC,CAAlC,EAAqCC,GAArC,CAAyCC,MAAtD;AACA,SAAOL,IAAP;AACD;;AAEM,SAASM,gBAAT,CAA0BC,GAA1B,EAA+B;AACpCN,kBAAOO,MAAP,CAAcC,gBAAd,CAA+BF,GAA/B;AACD;;AAEM,SAASG,WAAT,CAAqBH,GAArB,EAA0B;AAC/BN,kBAAOO,MAAP,CAAcG,sBAAd,CAAqCJ,GAArC;AACD;AAED;AACA;AACA;AACA;;;AACO,SAASK,UAAT,CAAoBC,UAApB,EAAgC;AACrC,MAAIA,UAAU,CAACC,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,WAAOD,UAAU,CAAC,CAAD,CAAjB;AACD;;AACD,SAAOZ,gBAAOO,MAAP,CAAcO,aAAd,CAA4BF,UAA5B,CAAP;AACD;AAED;AACA;AACA;AACA;;;AACO,eAAeG,YAAf,CAA4BC,IAA5B,EAAkC;AACvC,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCC,qBAAQC,QAAR,CAAiBL,IAAjB,EAAuB,CAACM,GAAD,EAAMC,IAAN,KAAe;AACpC,UAAID,GAAJ,EAAS;AACPH,QAAAA,MAAM,CAAC,IAAIK,KAAJ,CAAU,QAAV,CAAD,CAAN;AACD;;AACD,UAAI;AACF,cAAMC,OAAO,GAAGF,IAAI,CAACG,QAAL,EAAhB;AACAR,QAAAA,OAAO,CAACS,IAAI,CAACC,KAAL,CAAWH,OAAX,CAAD,CAAP;AACD,OAHD,CAGE,OAAOI,KAAP,EAAc;AACdV,QAAAA,MAAM,CAAC,IAAIK,KAAJ,CAAU,QAAV,CAAD,CAAN;AACD;AACF,KAVD;AAWD,GAZM,CAAP;AAaD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASM,aAAT,CAAuBd,IAAvB,EAA6Be,QAA7B,EAAuCC,EAAvC,EAA2C;AACzC,QAAMC,OAAO,GAAGjB,IAAI,CAACkB,KAAL,CAAWC,cAAKC,GAAhB,CAAhB;AACAH,EAAAA,OAAO,CAACI,GAAR;AACA,QAAMC,OAAO,GAAGL,OAAO,CAACM,IAAR,CAAaJ,cAAKC,GAAlB,CAAhB;AACA,uBAAOE,OAAP,EAAgBE,IAAhB,CAAqB,MAAM;AACzBpB,qBAAQqB,SAAR,CAAkBzB,IAAlB,EAAwBe,QAAxB,EAAkCC,EAAlC;AACD,GAFD,EAEGU,KAFH,CAEUpB,GAAD,IAAS;AAChBU,IAAAA,EAAE,CAACV,GAAD,CAAF;AACD,GAJD;AAKD;;AAEM,eAAemB,SAAf,CAAyBzB,IAAzB,EAA+BO,IAA/B,EAAqC;AAC1C,SAAO,IAAIN,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCW,IAAAA,aAAa,CAACd,IAAD,EAAOO,IAAP,EAAcD,GAAD,IAAS;AACjC,UAAIA,GAAJ,EAASH,MAAM,CAACG,GAAD,CAAN;AACTJ,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD,KAHY,CAAb;AAID,GALM,CAAP;AAMD,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["/* eslint-disable import/no-unresolved */\nimport vscode from 'vscode';\nimport FSExtra from 'fs-extra';\nimport mkdirp from 'mkdirp';\nimport Path from 'path';\n\nexport function getProjectRoot() {\n  const root = vscode.workspace.workspaceFolders[0].uri.fsPath;\n  return root;\n}\n\nexport function sendErrorMessage(msg) {\n  vscode.window.showErrorMessage(msg);\n}\n\nexport function sendMessage(msg) {\n  vscode.window.showInformationMessage(msg);\n}\n\n/**\n * 打开快速选项,只有一个选项时忽略\n * @param {Array<import('vscode').QuickPickItem>} chooseList\n */\nexport function openSelect(chooseList) {\n  if (chooseList.length === 1) {\n    return chooseList[0];\n  }\n  return vscode.window.showQuickPick(chooseList);\n}\n\n/**\n * 读取JSON文件\n * @param {string} path 目录\n */\nexport async function readJSONFile(path) {\n  return new Promise((resolve, reject) => {\n    FSExtra.readFile(path, (err, data) => {\n      if (err) {\n        reject(new Error('读取文件失败'));\n      }\n      try {\n        const dataStr = data.toString();\n        resolve(JSON.parse(dataStr));\n      } catch (error) {\n        reject(new Error('文件格式有误'));\n      }\n    });\n  });\n}\n\n/**\n * 写文件\n * @param {String} path 路径\n * @param {String} contents 内容\n * @param {Function} cb 回调\n */\nfunction writeFileReal(path, contents, cb) {\n  const dirList = path.split(Path.sep);\n  dirList.pop();\n  const dirPath = dirList.join(Path.sep);\n  mkdirp(dirPath).then(() => {\n    FSExtra.writeFile(path, contents, cb);\n  }).catch((err) => {\n    cb(err);\n  });\n}\n\nexport async function writeFile(path, data) {\n  return new Promise((resolve, reject) => {\n    writeFileReal(path, data, (err) => {\n      if (err) reject(err);\n      resolve(true);\n    });\n  });\n}\n\n// module.exports = {\n//   getProjectRoot,\n//   sendErrorMessage,\n//   sendMessage,\n//   readJSONFile,\n//   openSelect,\n//   writeFile,\n// };\n"],"file":"index.js"}