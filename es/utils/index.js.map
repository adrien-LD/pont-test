{"version":3,"sources":["../../src/utils/index.js"],"names":["vscode","FSExtra","mkdirp","Path","getProjectRoot","root","workspace","workspaceFolders","uri","fsPath","sendErrorMessage","msg","window","showErrorMessage","sendMessage","showInformationMessage","openSelect","chooseList","length","showQuickPick","readJSONFile","path","Promise","resolve","reject","readFile","err","data","Error","dataStr","toString","JSON","parse","error","writeFileReal","contents","cb","dirList","split","sep","pop","dirPath","join","then","writeFile","catch"],"mappings":";;;;AAAA;AACA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,OAAP,MAAoB,UAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,OAAO,SAASC,cAAT,GAA0B;AAC/B,MAAMC,IAAI,GAAGL,MAAM,CAACM,SAAP,CAAiBC,gBAAjB,CAAkC,CAAlC,EAAqCC,GAArC,CAAyCC,MAAtD;AACA,SAAOJ,IAAP;AACD;AAED,OAAO,SAASK,gBAAT,CAA0BC,GAA1B,EAA+B;AACpCX,EAAAA,MAAM,CAACY,MAAP,CAAcC,gBAAd,CAA+BF,GAA/B;AACD;AAED,OAAO,SAASG,WAAT,CAAqBH,GAArB,EAA0B;AAC/BX,EAAAA,MAAM,CAACY,MAAP,CAAcG,sBAAd,CAAqCJ,GAArC;AACD;AAED;AACA;AACA;AACA;;AACA,OAAO,SAASK,UAAT,CAAoBC,UAApB,EAAgC;AACrC,MAAIA,UAAU,CAACC,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,WAAOD,UAAU,CAAC,CAAD,CAAjB;AACD;;AACD,SAAOjB,MAAM,CAACY,MAAP,CAAcO,aAAd,CAA4BF,UAA5B,CAAP;AACD;AAED;AACA;AACA;AACA;;AACA,gBAAsBG,YAAtB;AAAA;AAAA;AAgBA;AACA;AACA;AACA;AACA;AACA;;;0EArBO,iBAA4BC,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA,6CACE,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCvB,cAAAA,OAAO,CAACwB,QAAR,CAAiBJ,IAAjB,EAAuB,UAACK,GAAD,EAAMC,IAAN,EAAe;AACpC,oBAAID,GAAJ,EAAS;AACPF,kBAAAA,MAAM,CAAC,IAAII,KAAJ,CAAU,QAAV,CAAD,CAAN;AACD;;AACD,oBAAI;AACF,sBAAMC,OAAO,GAAGF,IAAI,CAACG,QAAL,EAAhB;AACAP,kBAAAA,OAAO,CAACQ,IAAI,CAACC,KAAL,CAAWH,OAAX,CAAD,CAAP;AACD,iBAHD,CAGE,OAAOI,KAAP,EAAc;AACdT,kBAAAA,MAAM,CAAC,IAAII,KAAJ,CAAU,QAAV,CAAD,CAAN;AACD;AACF,eAVD;AAWD,aAZM,CADF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAsBP,SAASM,aAAT,CAAuBb,IAAvB,EAA6Bc,QAA7B,EAAuCC,EAAvC,EAA2C;AACzC,MAAMC,OAAO,GAAGhB,IAAI,CAACiB,KAAL,CAAWnC,IAAI,CAACoC,GAAhB,CAAhB;AACAF,EAAAA,OAAO,CAACG,GAAR;AACA,MAAMC,OAAO,GAAGJ,OAAO,CAACK,IAAR,CAAavC,IAAI,CAACoC,GAAlB,CAAhB;AACArC,EAAAA,MAAM,CAACuC,OAAD,CAAN,CAAgBE,IAAhB,CAAqB,YAAM;AACzB1C,IAAAA,OAAO,CAAC2C,SAAR,CAAkBvB,IAAlB,EAAwBc,QAAxB,EAAkCC,EAAlC;AACD,GAFD,EAEGS,KAFH,CAES,UAACnB,GAAD,EAAS;AAChBU,IAAAA,EAAE,CAACV,GAAD,CAAF;AACD,GAJD;AAKD;;AAED,gBAAsBkB,SAAtB;AAAA;AAAA,C,CASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;uEAhBO,kBAAyBvB,IAAzB,EAA+BM,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA,8CACE,IAAIL,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCU,cAAAA,aAAa,CAACb,IAAD,EAAOM,IAAP,EAAa,UAACD,GAAD,EAAS;AACjC,oBAAIA,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN;AACTH,gBAAAA,OAAO,CAAC,IAAD,CAAP;AACD,eAHY,CAAb;AAID,aALM,CADF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/* eslint-disable import/no-unresolved */\nimport vscode from 'vscode';\nimport FSExtra from 'fs-extra';\nimport mkdirp from 'mkdirp';\nimport Path from 'path';\n\nexport function getProjectRoot() {\n  const root = vscode.workspace.workspaceFolders[0].uri.fsPath;\n  return root;\n}\n\nexport function sendErrorMessage(msg) {\n  vscode.window.showErrorMessage(msg);\n}\n\nexport function sendMessage(msg) {\n  vscode.window.showInformationMessage(msg);\n}\n\n/**\n * 打开快速选项,只有一个选项时忽略\n * @param {Array<import('vscode').QuickPickItem>} chooseList\n */\nexport function openSelect(chooseList) {\n  if (chooseList.length === 1) {\n    return chooseList[0];\n  }\n  return vscode.window.showQuickPick(chooseList);\n}\n\n/**\n * 读取JSON文件\n * @param {string} path 目录\n */\nexport async function readJSONFile(path) {\n  return new Promise((resolve, reject) => {\n    FSExtra.readFile(path, (err, data) => {\n      if (err) {\n        reject(new Error('读取文件失败'));\n      }\n      try {\n        const dataStr = data.toString();\n        resolve(JSON.parse(dataStr));\n      } catch (error) {\n        reject(new Error('文件格式有误'));\n      }\n    });\n  });\n}\n\n/**\n * 写文件\n * @param {String} path 路径\n * @param {String} contents 内容\n * @param {Function} cb 回调\n */\nfunction writeFileReal(path, contents, cb) {\n  const dirList = path.split(Path.sep);\n  dirList.pop();\n  const dirPath = dirList.join(Path.sep);\n  mkdirp(dirPath).then(() => {\n    FSExtra.writeFile(path, contents, cb);\n  }).catch((err) => {\n    cb(err);\n  });\n}\n\nexport async function writeFile(path, data) {\n  return new Promise((resolve, reject) => {\n    writeFileReal(path, data, (err) => {\n      if (err) reject(err);\n      resolve(true);\n    });\n  });\n}\n\n// module.exports = {\n//   getProjectRoot,\n//   sendErrorMessage,\n//   sendMessage,\n//   readJSONFile,\n//   openSelect,\n//   writeFile,\n// };\n"],"file":"index.js"}